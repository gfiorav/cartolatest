<script type="text/javascript">
  var urls = <%= raw @cards.map(&:url).to_json %>
  var columns = <%= @columns %>
  var rows = <%= @rows %>

  $(document).ready(function () {
    var card_height = $(window).height() / columns;
    var card_width = $(window).width() / rows;

    for (var u in urls) {
      var card = document.createElement('img');
      var prepared_url = urls[u].replace('{X}', Math.floor(card_width))
                                .replace('{Y}', Math.floor(card_height));

      card.setAttribute('height', card_height);
      card.setAttribute('width', card_width);
      card.setAttribute('src', prepared_url);

      document.getElementsByTagName('body')[0].appendChild(card);
    }
  })
</script>
